library(pbtools)
library(knitr)
opts_knit$set(root.dir='~/github/local/Charting-government/')
library(pbtools)
library(gridExtra)
library(pbtools)
file <- tempfile()
urldata <- 'http://www.governancereport.org/fileadmin/governancereport/2014/downloads/GovReportDataset2014.csv'
urlindex <- 'http://www.governancereport.org/fileadmin/governancereport/2014/downloads/GovRep2014Indexes.csv'
download.file(urldata,destfile='./data-input/GovReport2014_data.csv')
download.file(urlindex,destfile='./data-input/GovReport2014_index.csv')
GovReportIndex2014 <- read.csv('./data-input/GovReport2014_index.csv')
GovReportData2014 <- read.csv('./data-input/GovReport2014_data.csv')
countries <- c('Czech Republic','Poland','Slovakia','Hungary','Germany','Slovenia',
'Estonia','Latvia','Lithuania','United Kingdom','New Zealand',
'Netherlands')
# CODEBOOK AT
# http://www.governancereport.org/fileadmin/governancereport/2014/downloads/GovReportCodebook2014.pdf
# a5010: Degree of collaboration between ministries
# a5011: degree of coordination/collaboration within administrations
# a5075: Overall coherence of public policies
# a5072: Authorities capacity to adapt policies to changes in the
# economic and social contexts
# a5071: Is evaluation a common practice?
# a5020: are actions of public authorities in line with a long-term strategic vision?
# a5022: do the pub auths have capacity to encourage public and private stakeholders to work
# towards that vision?
# a5040: are there public or private think tanks producing ...
# a5081: 'Is the capacity of national public authorities hampered by divisions within the State apparatus?'
# a5074: overall coherence
variables_indiv <- c('stat.score','researchers.unesco','a5010','a5011','a5074','a5020',
'a5081','a5074','a5022','a5072')
# INDEXES CODEBOOK AT
# http://www.governancereport.org/fileadmin/governancereport/2014/downloads/IndexesCodebook.pdf
variables_index <- c('delivery_overallindex100','coordexpindex100','regqualindex100',
'intelligenceindex100')
# check that the country and variable names are correct in lists for filtering
sapply(countries, function(x) x %in% GovReportData2014$country)
sapply(variables_indiv, function(x) x %in% GovReportData2014$variable)
sapply(variables_index, function(x) x %in% GovReportData2014$variable)
grr_v <- melt(GovReportData2014,id.vars = 'country') %>%
filter(country %in% countries & variable %in% variables_indiv) %>%
group_by(country) %>%
mutate(mean = mean(value[variable!='delivery_overallindex100'])) %>%
#   mutate(mean = mean(value,na.rm = T)) %>%
ungroup() %>%
dcast(country + mean ~ variable) %>%
melt() %>%
group_by(country) %>%
mutate(mean = value[variable=='mean']) %>%
ungroup() %>%
group_by(variable) %>%
arrange(value)
variablesCZ <- c('Profesionalita','Nestrannost státní správy',
'Efektivita regulací','Regulace bez prodleni',
'Efektivita výběru daní','Schopnost zabraňovat daňovým únikům')
grr_v$variable <- revalue(grr_v$variable, c('mean'='Průměr',
'proff'='Profesionalita',
'impar'='Nestrannost státní správy',
'X6.1'='Efektivita regulací',
'X6.3'='Regulace bez prodleni',
'a3032'='Efektivita výběru daní',
'a3033'='Schopnost zabraňovat daňovým únikům'))
View(grr_v)
